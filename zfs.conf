options zfs zfs_txg_timeout=32
options zfs zfs_txg_history=9999

options zfs zfs_dirty_data_max=4147483648
options zfs zfs_dirty_data_max_max=8147483648
options zfs zfs_dirty_data_sync_percent=12

options zfs zfs_arc_max=25022320128
options zfs zfs_mg_noalloc_threshold=39
options zfs zfs_dmu_offset_next_sync=0

options zfs zfs_vdev_aggregation_limit=4194304
options zfs zfs_vdev_read_gap_limit=262144
options zfs zfs_vdev_write_gap_limit=32768

# These settings apply per leaf vdev (physical disk): so we split 30 slots (for the single-disk vdev) into 4 so all activities get a fair share
options zfs zfs_vdev_max_active=30

options zfs zfs_vdev_sync_read_min_active=8
options zfs zfs_vdev_sync_write_min_active=2
options zfs zfs_vdev_async_read_min_active=6
options zfs zfs_vdev_async_write_min_active=2

options zfs zfs_vdev_sync_read_max_active=30
options zfs zfs_vdev_sync_write_max_active=4
options zfs zfs_vdev_async_read_max_active=30
options zfs zfs_vdev_async_write_max_active=4

# Increase the Deadman timer to 60 seconds for slow USB/SMR drives
options zfs zfs_deadman_ziotime_ms=60000

# Limit concurrent scrub I/O to 1 per vdev to prevent USB bus saturation
options zfs zfs_vdev_scrub_min_active=1
options zfs zfs_vdev_scrub_max_active=1
